import{_ as o,c as p,b as e,d as n,w as i,a as d,e as a,r as t,o as u}from"./app-C5EA9484.js";const c={},v={class:"table-of-contents"},m={href:"https://zhuanlan.zhihu.com/p/266899863",target:"_blank",rel:"noopener noreferrer"},b={href:"https://blog.csdn.net/qq_33229176/article/details/113055364",target:"_blank",rel:"noopener noreferrer"},h={href:"https://www.liwenzhou.com/posts/Go/deploy-in-docker/",target:"_blank",rel:"noopener noreferrer"},g={href:"https://blog.csdn.net/zzhongcy/article/details/105071018",target:"_blank",rel:"noopener noreferrer"};function f(k,s){const l=t("router-link"),r=t("ExternalLinkIcon");return u(),p("div",null,[s[14]||(s[14]=e("h2",{id:"目录",tabindex:"-1"},[e("a",{class:"header-anchor",href:"#目录"},[e("span",null,"目录")])],-1)),e("nav",v,[e("ul",null,[e("li",null,[n(l,{to:"#目录"},{default:i(()=>[...s[0]||(s[0]=[a("目录",-1)])]),_:1})]),e("li",null,[n(l,{to:"#supervisor-简介"},{default:i(()=>[...s[1]||(s[1]=[a("supervisor 简介",-1)])]),_:1}),e("ul",null,[e("li",null,[n(l,{to:"#安装"},{default:i(()=>[...s[2]||(s[2]=[a("安装",-1)])]),_:1})]),e("li",null,[n(l,{to:"#supervisor-配置"},{default:i(()=>[...s[3]||(s[3]=[a("Supervisor 配置",-1)])]),_:1})]),e("li",null,[n(l,{to:"#启动-supervisor-服务"},{default:i(()=>[...s[4]||(s[4]=[a("启动 supervisor 服务",-1)])]),_:1})]),e("li",null,[n(l,{to:"#编辑文件"},{default:i(()=>[...s[5]||(s[5]=[a("编辑文件",-1)])]),_:1})]),e("li",null,[n(l,{to:"#输入内容简单说明下"},{default:i(()=>[...s[6]||(s[6]=[a("输入内容简单说明下",-1)])]),_:1})]),e("li",null,[n(l,{to:"#启动服务"},{default:i(()=>[...s[7]||(s[7]=[a("启动服务",-1)])]),_:1})]),e("li",null,[n(l,{to:"#常用的-supervisr-管理命令"},{default:i(()=>[...s[8]||(s[8]=[a("常用的 supervisr 管理命令",-1)])]),_:1})])])]),e("li",null,[n(l,{to:"#参考"},{default:i(()=>[...s[9]||(s[9]=[a("参考",-1)])]),_:1})])])]),s[15]||(s[15]=d(`<h2 id="supervisor-简介" tabindex="-1"><a class="header-anchor" href="#supervisor-简介"><span>supervisor 简介</span></a></h2><blockquote><p>Supervisor 是业界流行的一个通用的进程管理程序，它能将一个普通的命令行进程变为后台守护进程，并监控该进程的运行状态，当该进程异常退出时能将其自动重启。 Supervisor 是一个进程控制系统. 它是一个 C/S 系统(注意: 其提供 WEB 接口给用户查询和控制), 它允许用户去监控和控制在类 UNIX 系统的进程. 它的目标与 launchd, daemontools 和 runit 有些相似, 但是与它们不一样的是, 它不是作为 init(进程号 pid 是 1)运行. 它是被用来控制进程, 并且它在启动的时候和一般程序并无二致.</p></blockquote><h3 id="安装" tabindex="-1"><a class="header-anchor" href="#安装"><span>安装</span></a></h3><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre><code><span class="line"><span class="token comment"># 1）centos 安装：</span></span>
<span class="line">yum <span class="token function">install</span> supervisor</span>
<span class="line"></span>
<span class="line"><span class="token comment"># 2）ubuntu 安装：</span></span>
<span class="line"><span class="token function">apt-get</span> <span class="token function">install</span> supervisor</span>
<span class="line"><span class="token comment"># （如果安装失败检查镜像源，替换最新的更新下然后再安装）</span></span>
<span class="line"></span>
<span class="line"><span class="token comment"># 3）masOS安装：</span></span>
<span class="line">brew <span class="token function">install</span> supervisor</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="supervisor-配置" tabindex="-1"><a class="header-anchor" href="#supervisor-配置"><span>Supervisor 配置</span></a></h3><blockquote><p>Supervisor 的配置文件为：/etc/supervisor/supervisord.conf ，Supervisor 所管理的应用的配置文件放在 /etc/supervisor/conf.d/ 目录中，这个目录可以在 supervisord.conf 中的 include 配置。</p></blockquote><div class="language-conf line-numbers-mode" data-highlighter="prismjs" data-ext="conf" data-title="conf"><pre><code><span class="line">[include]</span>
<span class="line">files = /etc/supervisor/conf.d/*.conf</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="启动-supervisor-服务" tabindex="-1"><a class="header-anchor" href="#启动-supervisor-服务"><span>启动 supervisor 服务</span></a></h3><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre><code><span class="line">supervisord <span class="token parameter variable">-c</span> /etc/supervisor/supervisord.conf</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><blockquote><p>以 ubuntu 为例，在/etc/supervisor/conf.d 文件下添加<code>KitReWi.conf</code>文件</p></blockquote><h3 id="编辑文件" tabindex="-1"><a class="header-anchor" href="#编辑文件"><span>编辑文件</span></a></h3><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre><code><span class="line"><span class="token builtin class-name">cd</span> /etc/supervisor/conf.d/</span>
<span class="line"><span class="token function">nano</span> KitReWi.conf</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="输入内容简单说明下" tabindex="-1"><a class="header-anchor" href="#输入内容简单说明下"><span>输入内容简单说明下</span></a></h3><p>program：项目名称 command 执行命令 使用 go build -o KitReWi 编译后文件路径</p><p>注：分号（;）开头的配置表示注释</p><div class="language-conf line-numbers-mode" data-highlighter="prismjs" data-ext="conf" data-title="conf"><pre><code><span class="line">[program:KitReWi]  ;程序名称</span>
<span class="line">user=root  ;执行程序的用户</span>
<span class="line">command=./KitReWi  ;执行的命令</span>
<span class="line">directory=/home/admin/XXX/ ;命令执行的目录</span>
<span class="line">stopsignal=TERM  ;重启时发送的信号</span>
<span class="line">autostart=true</span>
<span class="line">autorestart=true  ;是否自动重启</span>
<span class="line">startsecs=10</span>
<span class="line">stdout_logfile=/home/admin/XXX/logs/KitReWi-stdout.log  ;标准输出日志位置</span>
<span class="line">stdout_logfile_maxbytes=1MB</span>
<span class="line">stdout_logfile_backups=10</span>
<span class="line">stdout_capture_maxbytes=1MB</span>
<span class="line">stderr_logfile=/home/admin/XXX/logs/KitReWi-stderr.log  ;标准错误日志位置</span>
<span class="line">stderr_logfile_maxbytes=1MB</span>
<span class="line">stderr_logfile_backups=10</span>
<span class="line">stderr_capture_maxbytes=1MB</span>
<span class="line">stopsignal=INT</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="启动服务" tabindex="-1"><a class="header-anchor" href="#启动服务"><span>启动服务</span></a></h3><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre><code><span class="line">supervisorctl start KitReWi</span>
<span class="line">supervisorctl update <span class="token comment"># 更新配置文件并重启相关的程序</span></span>
<span class="line">supervisorctl status KitReWi <span class="token comment"># 查看bluebell的运行状态</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="常用的-supervisr-管理命令" tabindex="-1"><a class="header-anchor" href="#常用的-supervisr-管理命令"><span>常用的 supervisr 管理命令</span></a></h3><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre><code><span class="line">supervisorctl status       <span class="token comment"># 查看所有任务状态</span></span>
<span class="line">supervisorctl <span class="token function">shutdown</span>     <span class="token comment"># 关闭所有任务</span></span>
<span class="line">supervisorctl start 程序名  <span class="token comment"># 启动任务</span></span>
<span class="line">supervisorctl stop 程序名   <span class="token comment"># 关闭任务</span></span>
<span class="line">supervisorctl reload       <span class="token comment"># 重启supervisor</span></span>
<span class="line"><span class="token function">service</span> supervisor stop <span class="token comment"># 停止supervisor服务</span></span>
<span class="line"><span class="token function">service</span> supervisor start <span class="token comment"># 启动supervisor服务</span></span>
<span class="line">supervisorctl stop<span class="token operator">|</span>start program_name <span class="token comment">#启动或停止服务</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="参考" tabindex="-1"><a class="header-anchor" href="#参考"><span>参考</span></a></h2>`,21)),e("ul",null,[e("li",null,[e("a",m,[s[10]||(s[10]=a("Go 语言项目部署的那些方式",-1)),n(r)])]),e("li",null,[e("a",b,[s[11]||(s[11]=a("supervisor 守护 golang 进程",-1)),n(r)])]),e("li",null,[e("a",h,[s[12]||(s[12]=a("如何使用 Docker 部署 Go Web 应用",-1)),n(r)])]),e("li",null,[e("a",g,[s[13]||(s[13]=a("supervisor 配置和使用详解",-1)),n(r)])])])])}const _=o(c,[["render",f]]),y=JSON.parse('{"path":"/blogs/developer/backend/GoyuyanxiangmushiyongSupervisorbushu.html","title":"Go语言项目使用Supervisor部署","lang":"zh-CN","frontmatter":{"title":"Go语言项目使用Supervisor部署","date":"2023-03-26T02:00:00.000Z","tags":["项目部署","supervisor"],"categories":["backend","Go"]},"headers":[{"level":2,"title":"目录","slug":"目录","link":"#目录","children":[]},{"level":2,"title":"supervisor 简介","slug":"supervisor-简介","link":"#supervisor-简介","children":[{"level":3,"title":"安装","slug":"安装","link":"#安装","children":[]},{"level":3,"title":"Supervisor 配置","slug":"supervisor-配置","link":"#supervisor-配置","children":[]},{"level":3,"title":"启动 supervisor 服务","slug":"启动-supervisor-服务","link":"#启动-supervisor-服务","children":[]},{"level":3,"title":"编辑文件","slug":"编辑文件","link":"#编辑文件","children":[]},{"level":3,"title":"输入内容简单说明下","slug":"输入内容简单说明下","link":"#输入内容简单说明下","children":[]},{"level":3,"title":"启动服务","slug":"启动服务","link":"#启动服务","children":[]},{"level":3,"title":"常用的 supervisr 管理命令","slug":"常用的-supervisr-管理命令","link":"#常用的-supervisr-管理命令","children":[]}]},{"level":2,"title":"参考","slug":"参考","link":"#参考","children":[]}],"git":{"createdTime":1759387174000,"updatedTime":1769075498000,"contributors":[{"name":"ReWi","email":"RejoiceWindow@yeah.com","commits":3}]},"filePathRelative":"blogs/developer/backend/Go语言项目使用Supervisor部署.md"}');export{_ as comp,y as data};
